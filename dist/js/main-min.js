function drawTimeSeries(t,e,a){let n=10,i=20,r=25,o=50,s=250-n-r,c=document.getElementById("time-series").offsetWidth-o-i;console.log(c);let l=d3.select("#time-series").select("svg").attr("width",c+o+i).attr("height",s+n+r).select("g").attr("transform","translate("+o+","+n+")"),d=d3.scaleTime().range([0,c]),m=d3.scaleLinear().range([s,0]);d.domain(e),m.domain(a);let u=d3.line().x(function(t){return d(t.date)}).y(function(t){return m(t.y)});l.select(".line").data([t]).attr("d",u);let f=d3.axisBottom(d).tickFormat(d3.timeFormat("%m/%Y")).ticks(d3.timeMonth.every(6)),g=d3.axisLeft(m);l.select(".xAxis").attr("transform","translate(0,"+s+")").call(f),l.select(".yAxis").call(g),l.select(".yAxisLabel").attr("transform","rotate(-90)").attr("y",0-o).attr("x",0-s/2).attr("dy","1em")}$.getJSON("http://127.0.0.1:3000/",function(t){console.log(t);let e={};t.agencies.forEach(function(t){t.activeDate=new Date(t.activeDate);let a=new Date(t.activeDate.getFullYear(),t.activeDate.getMonth());a in e||(e[a]=0),e[a]+=1}),e=Object.keys(e).map(function(t){return{date:new Date(t),y:e[t]}}).sort(function(t,e){return t.date-e.date});let a,n=d3.extent(e,function(t){return t.date}),i=[0,d3.max(e,function(t){return t.y})+20];drawTimeSeries(e,n,i),$(window).resize(function(){clearTimeout(a),a=setTimeout(function(){drawTimeSeries(e,n,i)},100)})});